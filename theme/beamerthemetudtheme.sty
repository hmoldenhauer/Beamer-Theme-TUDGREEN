% Copyright 2014 by Robert Temminghoff <robert.temminghoff@tu-dortmund.de>
%
% This program can be redistributed and/or modified under the terms
% of the GNU Public License, version 2.

%	Henning Moldenhauer <henning.moldenhauer@tu-dortmund.de>
%	Robert Temminghoff <robert.temminghoff@tu-dortmund.de>

\typeout{------ TUD style ------}

\mode<presentation>

% % % Define own colors
\definecolor{tudgreen}{rgb}{0.392156,0.588235,0.000000}
\definecolor{lightgrey}{rgb}{0.97,0.97,0.97}
\definecolor{medgrey}{rgb}{0.8,0.8,0.8}
\definecolor{boldgrey}{rgb}{0.1,0.1,0.1}

% % % Choose basic themes to use
\useinnertheme[shadow=true]{rounded}
\useoutertheme{infolines}
\usecolortheme[named=boldgrey]{structure}

% % % Options for navigation symbols
\setbeamertemplate{navigation symbols}{}    % Suppress them

\AtBeginDocument{
	{
		\usebeamerfont*{headline}
		\colorlet{global.bg}{bg}
		\usebeamercolor{subsection in head/foot}
		\usebeamercolor{section in head/foot}
		\usebeamercolor{frametitle}

%		defines shading of frametitle	name of shading	     height of shading
		\pgfdeclarehorizontalshading{beamer@frametitle}{12ex}{
			color(0ex)=(tudgreen);		% first color of shading
			color(.7\paperwidth)=(white);	% color at 70% of shading
			color(\the\paperwidth)=(white)	% color at end of shading
		}
%		defines shading over frametitle	name of shading	     height of shading
		\pgfdeclarehorizontalshading{beamer@aboveframetitleL}{12ex}{
			color(0ex)=(white);				% first color of shading
			color(.2\paperwidth)=(white);			% color at 70% of shading
			color(.51\paperwidth)=(tudgreen!30!white)	% color at end of shading
		}
		\pgfdeclarehorizontalshading{beamer@aboveframetitleR}{12ex}{
			color(0ex)=(tudgreen!30!white);		% first color of shading
			color(.51\paperwidth)=(tudgreen)	% color at end of shading
		}
	}
}

% % % Define colors of individual elements

% % Inner elements
%\setbeamercolor{frametitle}{horizontal shading}
\setbeamercolor{frametitle}{fg=lightgrey}

%\setbeamertemplate{frametitle}[smoothbars theme]

\setbeamercolor{titlelike}{fg=white,bg=tudgreen}

%\setbeamercolor{headline}{fg=medgrey}

\setbeamercolor{item}{fg=tudgreen}
\setbeamercolor{subitem}{fg=tudgreen}
\setbeamercolor{subsubitem}{fg=tudgreen}

\setbeamercolor{block title}{fg=white, bg=tudgreen}
\setbeamercolor{block body}{parent=normal text,use=block title,bg=blue!03!white}

% % Outer Elements

% % % TU Logo now as vectorgraphics
\defbeamertemplate*{headline}{smoothbars theme}
{
	\hbox{% Box for blending white to green
		\begin{beamercolorbox}[wd=.5\paperwidth,ht=2.65ex,dp=1.5ex,right]{section in head/foot}%
			\pgfuseshading{beamer@aboveframetitleL}
		\end{beamercolorbox}%
		\begin{beamercolorbox}[wd=.5\paperwidth,ht=2.65ex,dp=1.5ex,left]{subsection in head/foot}%
			\pgfuseshading{beamer@aboveframetitleR}
		\end{beamercolorbox}%
	}
	\vskip-10ex % arrange blending box correctly

	\hbox{% box for section and subsection titles
		\begin{beamercolorbox}[wd=.5\paperwidth,ht=2.65ex,dp=1.5ex,right]{empty}%
			\usebeamerfont{section in head/foot}
			\insertsectionhead
			\hspace*{.5ex}
		\end{beamercolorbox}%
		\begin{beamercolorbox}[wd=.5\paperwidth,ht=2.65ex,dp=1.5ex,left]{subsection in head/foot}%
			\usebeamerfont{subsection in head/foot}
			\hspace*{.5ex}
			\insertsubsectionhead
		\end{beamercolorbox}%
	}
	\vskip+11.25ex % arrange text correctly

	\begin{beamercolorbox}[wd=\paperwidth,ht=0cm,dp=0ex]{frametitle}
		\pgfuseshading{beamer@frametitle}
	\end{beamercolorbox}
   
	\vskip-10ex % arrange 2nd blending (green to white) correctly
	\usebeamercolor[bg]{logo}
	\hfill
	\includegraphics[height=0.7cm]{theme/logo_TUDortmund}\hspace{0.25cm}
	\vskip-14ex % arrange all blending boxes correctly
}

\defbeamertemplate*{frametitle}{smoothbars theme}
{
	\nointerlineskip
	\usebeamerfont{headline}
	\vskip5ex
	\nointerlineskip
	\begin{beamercolorbox}[wd=.8\paperwidth,leftskip=.3cm,rightskip=.3cm plus1fil, vmode]{empty}
		\usebeamerfont*{frametitle}\insertframetitle
		\ifx\insertframesubtitle\@empty
			\strut\par
		\else
			\par{\usebeamerfont*{framesubtitle}{\usebeamercolor[fg]{framesubtitle}\insertframesubtitle}\strut\par}
		\fi
		\usebeamerfont{headline}
		\vskip+1ex  
	\end{beamercolorbox}
	\nointerlineskip
}
